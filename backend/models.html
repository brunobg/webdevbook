<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Models | A full stack approach to integrated web and native app development</title>
    <meta name="generator" content="VuePress 1.5.1">
    
    <meta name="description" content="Creating native and web apps using Vue, NativeScript and Laravel">
    <link rel="preload" href="/webdevbook/assets/css/0.styles.ff1b3640.css" as="style"><link rel="preload" href="/webdevbook/assets/js/app.4f75828c.js" as="script"><link rel="preload" href="/webdevbook/assets/js/2.7bd00ffb.js" as="script"><link rel="preload" href="/webdevbook/assets/js/17.57b18a8d.js" as="script"><link rel="prefetch" href="/webdevbook/assets/js/10.e4b20976.js"><link rel="prefetch" href="/webdevbook/assets/js/11.904536a7.js"><link rel="prefetch" href="/webdevbook/assets/js/12.b7a199c6.js"><link rel="prefetch" href="/webdevbook/assets/js/13.91b6d744.js"><link rel="prefetch" href="/webdevbook/assets/js/14.77f13f39.js"><link rel="prefetch" href="/webdevbook/assets/js/15.9ffc09aa.js"><link rel="prefetch" href="/webdevbook/assets/js/16.5e9aa680.js"><link rel="prefetch" href="/webdevbook/assets/js/18.9529298c.js"><link rel="prefetch" href="/webdevbook/assets/js/19.508215c1.js"><link rel="prefetch" href="/webdevbook/assets/js/20.48296455.js"><link rel="prefetch" href="/webdevbook/assets/js/21.3fd0f873.js"><link rel="prefetch" href="/webdevbook/assets/js/22.7c449731.js"><link rel="prefetch" href="/webdevbook/assets/js/23.b27bc194.js"><link rel="prefetch" href="/webdevbook/assets/js/24.563a9adc.js"><link rel="prefetch" href="/webdevbook/assets/js/25.8bd8ee3c.js"><link rel="prefetch" href="/webdevbook/assets/js/26.a45db01a.js"><link rel="prefetch" href="/webdevbook/assets/js/27.dd646eb0.js"><link rel="prefetch" href="/webdevbook/assets/js/28.78c881e0.js"><link rel="prefetch" href="/webdevbook/assets/js/29.42ced30d.js"><link rel="prefetch" href="/webdevbook/assets/js/3.70b562fb.js"><link rel="prefetch" href="/webdevbook/assets/js/30.765f0b32.js"><link rel="prefetch" href="/webdevbook/assets/js/31.8b699550.js"><link rel="prefetch" href="/webdevbook/assets/js/32.6d0f145e.js"><link rel="prefetch" href="/webdevbook/assets/js/33.1a3e991b.js"><link rel="prefetch" href="/webdevbook/assets/js/34.d2370d4d.js"><link rel="prefetch" href="/webdevbook/assets/js/35.b94d0909.js"><link rel="prefetch" href="/webdevbook/assets/js/36.3b8988b1.js"><link rel="prefetch" href="/webdevbook/assets/js/37.93d7a34d.js"><link rel="prefetch" href="/webdevbook/assets/js/38.523f0e63.js"><link rel="prefetch" href="/webdevbook/assets/js/4.67295c27.js"><link rel="prefetch" href="/webdevbook/assets/js/5.d14e8b5b.js"><link rel="prefetch" href="/webdevbook/assets/js/6.512d59c2.js"><link rel="prefetch" href="/webdevbook/assets/js/7.53cdc081.js"><link rel="prefetch" href="/webdevbook/assets/js/8.0214a69f.js"><link rel="prefetch" href="/webdevbook/assets/js/9.422c73b9.js">
    <link rel="stylesheet" href="/webdevbook/assets/css/0.styles.ff1b3640.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/webdevbook/" class="home-link router-link-active"><!----> <span class="site-name">A full stack approach to integrated web and native app development</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/webdevbook/" aria-current="page" class="sidebar-link">Home</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Frontend</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Backend</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/webdevbook/backend/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/webdevbook/backend/architecture.html" class="sidebar-link">Architecture</a></li><li><a href="/webdevbook/backend/structure.html" class="sidebar-link">Code structure</a></li><li><a href="/webdevbook/backend/setup.html" class="sidebar-link">Setup the project</a></li><li><a href="/webdevbook/backend/models.html" aria-current="page" class="active sidebar-link">Models</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webdevbook/backend/models.html#how-to-model-your-application" class="sidebar-link">How to model your application</a></li><li class="sidebar-sub-header"><a href="/webdevbook/backend/models.html#describing-types-in-graphql" class="sidebar-link">Describing types in Graphql</a></li><li class="sidebar-sub-header"><a href="/webdevbook/backend/models.html#relationships" class="sidebar-link">Relationships</a></li></ul></li><li><a href="/webdevbook/backend/database.html" class="sidebar-link">Database</a></li><li><a href="/webdevbook/backend/testing.html" class="sidebar-link">/backend/testing.html</a></li><li><a href="/webdevbook/backend/routing.html" class="sidebar-link">Routing</a></li><li><a href="/webdevbook/backend/controllers.html" class="sidebar-link">Controllers</a></li><li><a href="/webdevbook/backend/authentication.html" class="sidebar-link">Authentication</a></li><li><a href="/webdevbook/backend/security.html" class="sidebar-link">/backend/security.html</a></li><li><a href="/webdevbook/backend/deployment.html" class="sidebar-link">Deployment</a></li><li><a href="/webdevbook/backend/media.html" class="sidebar-link">Media</a></li><li><a href="/webdevbook/backend/pushcommunication.html" class="sidebar-link">Push communication</a></li><li><a href="/webdevbook/backend/scraping.html" class="sidebar-link">Scraping and crawlers</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="models"><a href="#models" class="header-anchor">#</a> Models</h1> <p>Each &quot;thing&quot; in your application will be a model. Examples: users, posts, comments, products.</p> <h2 id="how-to-model-your-application"><a href="#how-to-model-your-application" class="header-anchor">#</a> How to model your application</h2> <p>There's a bit of an art in how to model your database and application, and we <a href="/webdevbook/backend/architecture.html">talked a bit about what questions you should ask yourself</a>. Particularly if you are using a relational database, you want to take care of relationships between models. Relational databases don't have arrays as a native type, so if you have any field that is an array it's likely that you'll model it as a relationship.</p> <p>When you are at the drawing board, make a list of all the types you expect in your application. Then specify which fields they have. If a field is array, split it into a separate model; for example, if a user can have multiple addresses, you'll want a <code>User</code> and an <code>Address</code> models, while if they're only going to have one the address fields can be part of <code>User</code>.</p> <h2 id="describing-types-in-graphql"><a href="#describing-types-in-graphql" class="header-anchor">#</a> Describing types in Graphql</h2> <p>Graphql files will have a declaration for each model:</p> <div class="language-graphql extra-class"><pre class="language-graphql"><code><span class="token keyword">type</span> <span class="token class-name">Something</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">title</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The <code>!</code> marks that field as required. Note that Graphql allows arrays of basic types:</p> <div class="language-graphql extra-class"><pre class="language-graphql"><code><span class="token keyword">type</span> <span class="token class-name">Something</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">title</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>String<span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>[String!]!</code> means &quot;a required list of non-null strings&quot;. Take care when declaring arrays of basic types, since you'll have to so some sort of manipulation to get the data from a relational database.</p> <h2 id="relationships"><a href="#relationships" class="header-anchor">#</a> Relationships</h2> <p>So let's start with a basic 1:n relationship. We have users and they can make posts. Each user can make as many posts as they way, but each post is made by just one author. Here's how we can describe it in GraphQL:</p> <div class="language-graphql extra-class"><pre class="language-graphql"><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">email</span><span class="token punctuation">:</span> Email<span class="token operator">!</span>
  <span class="token attr-name">posts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Post<span class="token operator">!</span><span class="token punctuation">]</span> <span class="token directive function">@hasMany</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Post</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">title</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">content</span><span class="token punctuation">:</span> Text<span class="token operator">!</span>
  <span class="token attr-name">user</span><span class="token punctuation">:</span> User<span class="token operator">!</span>
    <span class="token directive function">@belongsTo</span>
    <span class="token directive function">@migrationForeign</span><span class="token punctuation">(</span><span class="token attr-name">onDelete</span><span class="token punctuation">:</span> <span class="token string">&quot;cascade&quot;</span><span class="token punctuation">,</span> <span class="token attr-name">onUpdate</span><span class="token punctuation">:</span> <span class="token string">&quot;cascade&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>When users are created they never made a post yet, so we don't make the field required. But posts are created by a user. Note that we declared posts as an array: <code>posts: [Post!]</code>. But they are a relationship, and we declare that with <code>@hasMany</code> and <code>@belongsTo</code> directives. These directives are processed by Lighthouse and GraphQL, together with <code>@migrationForeign</code> to specify a foreign key.</p> <p>If we were doing everything manually first we'd declare their migration, users:</p> <div class="language-php extra-class"><pre class="language-php"><code>    Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>Blueprint <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">bigIncrements</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email'</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">timestamps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>and posts:</p> <div class="language-php extra-class"><pre class="language-php"><code>    Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'posts'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>Blueprint <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">bigIncrements</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">unsignedBigInteger</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;user_id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">foreign</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;user_id&quot;</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">references</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;users&quot;</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">onDelete</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;cascade&quot;</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">onUpdate</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;cascade&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">timestamps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/webdevbook/backend/setup.html" class="prev">
        Setup the project
      </a></span> <span class="next"><a href="/webdevbook/backend/database.html">
        Database
      </a>
      →
    </span></p></div> </main> <footer data-v-136409f7><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" data-v-136409f7><img alt="Creative Commons License" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" style="border-width: 0;" data-v-136409f7></a> <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type" data-v-136409f7>A full stack approach to integrated web and native app development</span>
  by
  <span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName" data-v-136409f7>Bruno Barberi Gnecco</span>
  is licensed under a
  <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" data-v-136409f7>Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International
    License</a>.
</footer></div><div class="global-ui"></div></div>
    <script src="/webdevbook/assets/js/app.4f75828c.js" defer></script><script src="/webdevbook/assets/js/2.7bd00ffb.js" defer></script><script src="/webdevbook/assets/js/17.57b18a8d.js" defer></script>
  </body>
</html>
