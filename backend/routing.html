<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Routing | Web development: management, frontend and backend</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="Creating native and web apps using Vue, NativeScript and Laravel">
    <link rel="preload" href="/webdevbook/assets/css/0.styles.6f5b36b1.css" as="style"><link rel="preload" href="/webdevbook/assets/js/app.3185edc0.js" as="script"><link rel="preload" href="/webdevbook/assets/js/2.781508b5.js" as="script"><link rel="preload" href="/webdevbook/assets/js/20.587a99d4.js" as="script"><link rel="prefetch" href="/webdevbook/assets/js/10.d1e2b150.js"><link rel="prefetch" href="/webdevbook/assets/js/11.7aec7543.js"><link rel="prefetch" href="/webdevbook/assets/js/12.8eb40666.js"><link rel="prefetch" href="/webdevbook/assets/js/13.18f7e168.js"><link rel="prefetch" href="/webdevbook/assets/js/14.a9b756c9.js"><link rel="prefetch" href="/webdevbook/assets/js/15.547236f7.js"><link rel="prefetch" href="/webdevbook/assets/js/16.841aed3a.js"><link rel="prefetch" href="/webdevbook/assets/js/17.8a0ef582.js"><link rel="prefetch" href="/webdevbook/assets/js/18.f9246feb.js"><link rel="prefetch" href="/webdevbook/assets/js/19.a881605b.js"><link rel="prefetch" href="/webdevbook/assets/js/21.d8591cff.js"><link rel="prefetch" href="/webdevbook/assets/js/22.86fb033b.js"><link rel="prefetch" href="/webdevbook/assets/js/23.73cb4c91.js"><link rel="prefetch" href="/webdevbook/assets/js/24.173689b0.js"><link rel="prefetch" href="/webdevbook/assets/js/25.5163e502.js"><link rel="prefetch" href="/webdevbook/assets/js/26.af69131f.js"><link rel="prefetch" href="/webdevbook/assets/js/27.f87a48c0.js"><link rel="prefetch" href="/webdevbook/assets/js/28.0ed9fa10.js"><link rel="prefetch" href="/webdevbook/assets/js/29.57362fe3.js"><link rel="prefetch" href="/webdevbook/assets/js/3.f24485b2.js"><link rel="prefetch" href="/webdevbook/assets/js/30.5dc319e8.js"><link rel="prefetch" href="/webdevbook/assets/js/31.663e3762.js"><link rel="prefetch" href="/webdevbook/assets/js/32.0b8c32d5.js"><link rel="prefetch" href="/webdevbook/assets/js/33.306bf961.js"><link rel="prefetch" href="/webdevbook/assets/js/34.98d05890.js"><link rel="prefetch" href="/webdevbook/assets/js/35.565abeab.js"><link rel="prefetch" href="/webdevbook/assets/js/36.341f0764.js"><link rel="prefetch" href="/webdevbook/assets/js/37.bc0389f2.js"><link rel="prefetch" href="/webdevbook/assets/js/38.90f8c0a3.js"><link rel="prefetch" href="/webdevbook/assets/js/39.c5405ffb.js"><link rel="prefetch" href="/webdevbook/assets/js/4.8c939b71.js"><link rel="prefetch" href="/webdevbook/assets/js/40.ed160551.js"><link rel="prefetch" href="/webdevbook/assets/js/41.8d4690ca.js"><link rel="prefetch" href="/webdevbook/assets/js/42.1ccf4128.js"><link rel="prefetch" href="/webdevbook/assets/js/43.b7582d82.js"><link rel="prefetch" href="/webdevbook/assets/js/44.10934e49.js"><link rel="prefetch" href="/webdevbook/assets/js/45.40e001ab.js"><link rel="prefetch" href="/webdevbook/assets/js/46.aaf27bc5.js"><link rel="prefetch" href="/webdevbook/assets/js/5.3aa65dda.js"><link rel="prefetch" href="/webdevbook/assets/js/6.48831263.js"><link rel="prefetch" href="/webdevbook/assets/js/7.41804acd.js"><link rel="prefetch" href="/webdevbook/assets/js/8.4e2dad68.js"><link rel="prefetch" href="/webdevbook/assets/js/9.ea145265.js">
    <link rel="stylesheet" href="/webdevbook/assets/css/0.styles.6f5b36b1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/webdevbook/" class="home-link router-link-active"><!----> <span class="site-name">Web development: management, frontend and backend</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/webdevbook/" aria-current="page" class="sidebar-link">Home</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Software projects</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Frontend</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Backend</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/webdevbook/backend/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/webdevbook/backend/architecture.html" class="sidebar-link">Architecture</a></li><li><a href="/webdevbook/backend/structure.html" class="sidebar-link">Code structure</a></li><li><a href="/webdevbook/backend/setup.html" class="sidebar-link">Setup the project</a></li><li><a href="/webdevbook/backend/testing.html" class="sidebar-link">Testing</a></li><li><a href="/webdevbook/backend/models.html" class="sidebar-link">Models</a></li><li><a href="/webdevbook/backend/database.html" class="sidebar-link">Database</a></li><li><a href="/webdevbook/backend/routing.html" aria-current="page" class="active sidebar-link">Routing</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webdevbook/backend/routing.html#defining-routes" class="sidebar-link">Defining routes</a></li><li class="sidebar-sub-header"><a href="/webdevbook/backend/routing.html#middleware" class="sidebar-link">Middleware</a></li><li class="sidebar-sub-header"><a href="/webdevbook/backend/routing.html#spa-and-catch-all" class="sidebar-link">SPA and catch-all</a></li><li class="sidebar-sub-header"><a href="/webdevbook/backend/routing.html#rest" class="sidebar-link">REST</a></li></ul></li><li><a href="/webdevbook/backend/controllers.html" class="sidebar-link">Controllers</a></li><li><a href="/webdevbook/backend/authentication.html" class="sidebar-link">Authentication</a></li><li><a href="/webdevbook/backend/security.html" class="sidebar-link">Security</a></li><li><a href="/webdevbook/backend/deployment.html" class="sidebar-link">Deployment</a></li><li><a href="/webdevbook/backend/ssr.html" class="sidebar-link">Server side rendering</a></li><li><a href="/webdevbook/backend/media.html" class="sidebar-link">Media</a></li><li><a href="/webdevbook/backend/pushcommunication.html" class="sidebar-link">Push communication</a></li><li><a href="/webdevbook/backend/scraping.html" class="sidebar-link">Scraping and crawlers</a></li><li><a href="/webdevbook/backend/last.html" class="sidebar-link">Where to go from here</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="routing"><a href="#routing" class="header-anchor">#</a> Routing</h1> <p>Routing consists of processing HTTP requests to URLs and calling the appropriate code to handle them. In other words, when someone accesses <code>/post/23</code>, the appropriate code for showing the user with id 23 must be called. Most web frameworks let you handle routes dynamically. You can also use routing for URL redirection.</p> <p>Laravel has a <a href="https://laravel.com/docs/routing" target="_blank" rel="noopener noreferrer">well structured routing mechanism<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Your application has a <code>routes/</code> subdirectory, which has 4 files with self descriptive names: <code>api.php</code>, <code>channels.php</code>, <code>console.php</code> and <code>web.php</code>. Add the routing code to the appropriate file.</p> <p>In a SPA, backend routing is quite limited. Non-API requests should serve static content: the basic static HTML, JS and CSS, or dynamic files like images uploaded by users; the <a href="/webdevbook/frontend/routing.html">frontend will do its own routing</a> and render the correct HTML. There are a couple of points to consider with static data:</p> <ul><li>if you split your frontend code into separate and independent bundles, like a code for the main site and one of the admin dashboard, you'll have different static data for each one. Some of them might be protected by authentication and other middleware, but other than that it's just standard static files served by your web server or CDN.</li> <li><a href="/webdevbook/backend/ssr.html">header metadata</a>. This is relevant to crawlers or social media, and it's addressed in its own section.</li></ul> <p>The API requests have to be handled by the backend. In a REST approach you'll need to write routes for each endpoint. It's best to define a base URL, like <code>/api/</code>, for all these requests. If you have a breaking change you can also version things, with <code>/apiv2</code> or <code>/api/v2</code> as the base URL.</p> <p>A SPA GraphQL application should have very few endpoints. All API requests go to <code>/graphql</code>, and if you are using Lighthouse, or a similar library, it will setup the endpoint for you, so it's unlikely you'll need to do anything else about that. You'll have the <a href="/webdevbook/backend/authentication.html">authentication endpoints, which are explained in their own section</a>. You might have some other special endpoints, such as generating <a href="https://www.sitemaps.org/" target="_blank" rel="noopener noreferrer">dynamic sitemaps<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> on a URL like <code>/sitemap</code>. Other than these particular needs you'll mostly ignore routing except for a catch-all route, as detailed below.</p> <p>In a traditional server-side rendering however, each page needs its own route. This makes routing much more important and relevant. We'll have a brief overview about it.</p> <h2 id="defining-routes"><a href="#defining-routes" class="header-anchor">#</a> Defining routes</h2> <p>Laravel has a <a href="https://laravel.com/docs/routing" target="_blank" rel="noopener noreferrer">dedicated documentation to routing<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, so let's just skim over the important parts. This defines a route for the <code>/admin</code> endpoint with a <code>GET</code> request:</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'admin'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// your code goes here</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Most often you'll want to invoke a controller, which can be done like this:</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/user'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'UserController@index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Routes may have parameters, which are defined be brackets, like <code>{id}</code> and passed as arguments to your callback. Optional arguments are marked with a <code>?</code>, like <code>{name?}</code>.</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user/{id}'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token single-quoted-string string">'User '</span> <span class="token punctuation">.</span> <span class="token variable">$id</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user/{name?}'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$name</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token single-quoted-string string">'User name '</span> <span class="token punctuation">.</span> <span class="token variable">$name</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Finally, you can just redirect URLs:</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/here'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'/there'</span><span class="token punctuation">,</span> <span class="token number">301</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="middleware"><a href="#middleware" class="header-anchor">#</a> Middleware</h2> <p>There are several operations that are common to many endpoints. The most simple example is authentication: some endpoints should only be accessible to logged in users, or to administrators. Or you might want to throttle requests, to avoid password breaking attempts or to limit access to heavy resources. Middleware is a practical way to filter HTTP requests based on these specifications.</p> <p>The idea of middleware is that you apply it to the route itself, ensuring that it's called before your endpoint code is called.</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'admin'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// your code goes here</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'mymiddleware'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>You can easily define middleware for multiple routes:</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'first'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'second'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// your code</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user/profile'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// your code</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Check <a href="https://laravel.com/docs/routing" target="_blank" rel="noopener noreferrer">Laravel middleware documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for more information.</p> <p>Two important middleware that are part of Laravel are <code>auth</code> and <code>throttle</code>. The first one ensures that the user is logged in; there's <code>auth:api</code> flavor too, to use a different authentication guard for API requests.</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'admin'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// your code goes here</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'auth'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The other one limits the number of requests for a user. To throttle an endpoint to a maximum of 60 times per minute:</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'auth:api'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'throttle:60,1'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/user'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="spa-and-catch-all"><a href="#spa-and-catch-all" class="header-anchor">#</a> SPA and catch-all</h2> <p>Even though you serve the same static content for any request in a SPA, you still need to provide unique URLs so people can easily reach the content they want. This can be achieved by a catch-all route. There are many ways to achieve that. One is to do really a catchall:</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/{all}'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'layouts/app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'all'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'.*'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>You can be specific about the first subdirectory, restricting with a regex only the ones you have. Note that this must support the <code>/</code> URL too.</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/{any}'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'all'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'^(|post|user|group)/?.*'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>You can also be quite general and support any two level subdirectory, like this:</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/{any?}/{any2?}'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'layouts/app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The advantage of restricting to valid URLs is to return a 404 status code by the webserver, which is a good policy. Otherwise you only show a 404 error, known as a &quot;soft 404&quot;. The disadvantage is that you have to be sure your regex matches all the valid URLs and only those. Ideally you should match all well constructed URLs by the router, and check if the dynamic pages exist (for example, does <code>/user/283482340</code> exist?) in the webserver.</p> <h2 id="rest"><a href="#rest" class="header-anchor">#</a> REST</h2> <p>If instead of GraphQL you are using REST, you'll and routing will soon become best friends.</p> <p>Laravel helps by providing a <a href="https://laravel.com/docs/controllers#resource-controllers" target="_blank" rel="noopener noreferrer">single call that includes CRUD+index endpoints<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>:</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">resource</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'posts'</span><span class="token punctuation">,</span> PostController<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>We talk a bit more about this on the <a href="/webdevbook/backend/controllers.html">controllers chapter</a>.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/webdevbook/backend/database.html" class="prev">
        Database
      </a></span> <span class="next"><a href="/webdevbook/backend/controllers.html">
        Controllers
      </a>
      →
    </span></p></div> </main> <footer data-v-136409f7><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" data-v-136409f7><img alt="Creative Commons License" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" style="border-width: 0;" data-v-136409f7></a> <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type" data-v-136409f7>A full stack approach to integrated web and native app development</span>
  by
  <span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName" data-v-136409f7>Bruno Barberi Gnecco</span>
  is licensed under a
  <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" data-v-136409f7>Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International
    License</a>.
</footer></div><div class="global-ui"></div></div>
    <script src="/webdevbook/assets/js/app.3185edc0.js" defer></script><script src="/webdevbook/assets/js/2.781508b5.js" defer></script><script src="/webdevbook/assets/js/20.587a99d4.js" defer></script>
  </body>
</html>
