<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Introduction | Full stack Web and Native Development</title>
    <meta name="generator" content="VuePress 1.5.1">
    
    <meta name="description" content="Creating native and web apps using Vue, NativeScript and Laravel">
    <link rel="preload" href="/assets/css/0.styles.7e4b3e23.css" as="style"><link rel="preload" href="/assets/js/app.820aeba6.js" as="script"><link rel="preload" href="/assets/js/2.7bd00ffb.js" as="script"><link rel="preload" href="/assets/js/26.6913f4ea.js" as="script"><link rel="prefetch" href="/assets/js/10.ecb2b35d.js"><link rel="prefetch" href="/assets/js/11.668c04e1.js"><link rel="prefetch" href="/assets/js/12.7bd3ab23.js"><link rel="prefetch" href="/assets/js/13.9373112b.js"><link rel="prefetch" href="/assets/js/14.a44daf49.js"><link rel="prefetch" href="/assets/js/15.acfcc4da.js"><link rel="prefetch" href="/assets/js/16.304bd6ae.js"><link rel="prefetch" href="/assets/js/17.dc02afff.js"><link rel="prefetch" href="/assets/js/18.f0d3271f.js"><link rel="prefetch" href="/assets/js/19.d06c9906.js"><link rel="prefetch" href="/assets/js/20.dd6b07b3.js"><link rel="prefetch" href="/assets/js/21.7edad848.js"><link rel="prefetch" href="/assets/js/22.901473fe.js"><link rel="prefetch" href="/assets/js/23.f9d1d186.js"><link rel="prefetch" href="/assets/js/24.283da734.js"><link rel="prefetch" href="/assets/js/25.a41070f5.js"><link rel="prefetch" href="/assets/js/27.bfdbc3cb.js"><link rel="prefetch" href="/assets/js/28.d9525154.js"><link rel="prefetch" href="/assets/js/29.40bf433c.js"><link rel="prefetch" href="/assets/js/3.70b562fb.js"><link rel="prefetch" href="/assets/js/30.fb8065ff.js"><link rel="prefetch" href="/assets/js/31.f8831942.js"><link rel="prefetch" href="/assets/js/32.9318217e.js"><link rel="prefetch" href="/assets/js/4.99e7b2a0.js"><link rel="prefetch" href="/assets/js/5.f0c0dcb8.js"><link rel="prefetch" href="/assets/js/6.512d59c2.js"><link rel="prefetch" href="/assets/js/7.2dbe39f9.js"><link rel="prefetch" href="/assets/js/8.74aba7b0.js"><link rel="prefetch" href="/assets/js/9.0666d488.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7e4b3e23.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Full stack Web and Native Development</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">Home</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Frontend</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend/introduction.html" aria-current="page" class="active sidebar-link">Introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend/introduction.html#setup-your-computer" class="sidebar-link">Setup your computer</a></li><li class="sidebar-sub-header"><a href="/frontend/introduction.html#setup-the-project" class="sidebar-link">Setup the project</a></li><li class="sidebar-sub-header"><a href="/frontend/introduction.html#how-to-build" class="sidebar-link">How to build</a></li><li class="sidebar-sub-header"><a href="/frontend/introduction.html#code-structure" class="sidebar-link">Code structure</a></li><li class="sidebar-sub-header"><a href="/frontend/introduction.html#configuring-our-environment-variables" class="sidebar-link">Configuring our environment variables</a></li><li class="sidebar-sub-header"><a href="/frontend/introduction.html#sharing-native-and-web-code" class="sidebar-link">Sharing Native and Web code</a></li></ul></li><li><a href="/frontend/interface.html" class="sidebar-link">Building the interface</a></li><li><a href="/frontend/debug.html" class="sidebar-link">Code and debugging tips</a></li><li><a href="/frontend/deployment.html" class="sidebar-link">Deployment</a></li><li><a href="/frontend/routing.html" class="sidebar-link">Routing</a></li><li><a href="/frontend/stateandstorage.html" class="sidebar-link">State and storage</a></li><li><a href="/frontend/authentication.html" class="sidebar-link">Authentication</a></li><li><a href="/frontend/communication.html" class="sidebar-link">Communication with the backend</a></li><li><a href="/frontend/models.html" class="sidebar-link">Models and collections</a></li><li><a href="/frontend/testing.html" class="sidebar-link">Testing and Deployment</a></li><li><a href="/frontend/i18n.html" class="sidebar-link">Internationalization (i18n)</a></li><li><a href="/frontend/pushcommunication.html" class="sidebar-link">Push communication</a></li><li><a href="/frontend/camera.html" class="sidebar-link">Camera</a></li><li><a href="/frontend/sharing.html" class="sidebar-link">Sharing</a></li><li><a href="/frontend/caching.html" class="sidebar-link">/frontend/caching.html</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Backend</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h1> <p>So you want to build the frontend for a native and web application. You don't want to implement three different versions in three different languages, for Web, Android and iOS. You also think that going to a HTML wrapper like <a href="https://cordova.apache.org/" target="_blank" rel="noopener noreferrer">Cordova<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is too slow for what you are trying to achieve (is it really?). This book will explain one way to implement the entire frontend in JS, using HTML5 for web and native bindings for native.</p> <p>We assume that you have some familiarity with Javascript and <a href="https://vuejs.org" target="_blank" rel="noopener noreferrer">VueJS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. You might not have ever seen <a href="https://nativescript.org/" target="_blank" rel="noopener noreferrer">NativeScript<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (TNS), which is an open source framework for building truly native mobile apps with Angular, Vue.js, TypeScript, or JavaScript, which compiles to iOS or Android applications; it's fine, we'll be a little more detailed about it and you can read its documentation for any details you need. We are adopting it because <a href="https://nativescript-vue.org/" target="_blank" rel="noopener noreferrer">it provides integration with VueJS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and we can share most of our code between Web and Native versions of the application, changing only the interface code. This solves a major problem of keeping web, iOS and Android versions of the same application and avoid maintaining three different code bases. With this approach we maintain a single code base, with two different view templates, HTML and TNS. It becomes closer to maintaining a web responsive application.</p> <p>The frontend part of this book is about how to structure your code and how to solve the most common problems that we often face.</p> <h2 id="setup-your-computer"><a href="#setup-your-computer" class="header-anchor">#</a> Setup your computer</h2> <p>We'll use NodeJS and yarn for the code in this book. Install them according to their instructions.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>We'll use <code>yarn</code> on this book, but of course <code>npm</code> would work just as well.</p></div> <h2 id="setup-the-project"><a href="#setup-the-project" class="header-anchor">#</a> Setup the project</h2> <p>We will not follow the scaffolding from <a href="https://nativescript-vue.org/en/docs/getting-started/quick-start/" target="_blank" rel="noopener noreferrer">the nativescript getting started guide<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. The reason is that it doesn't play well with the usual vue-cli setup to build the web version. Instead we follow <a href="https://nativescript-vue.org/en/docs/getting-started/code-sharing/" target="_blank" rel="noopener noreferrer">its other setup<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> which is based on vue-cli and should be more familiar to most people. Let's create our application:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># we need vue-cli</span>
$ <span class="token function">yarn</span> global <span class="token function">add</span> @vue/cli

<span class="token comment"># create the scaffolding</span>
$ vue create our-client
<span class="token comment"># You should add babel and webpack when asked</span>

<span class="token comment"># install nativescript</span>
$ <span class="token builtin class-name">cd</span> our-client
$ vue <span class="token function">add</span> vue-cli-plugin-nativescript-vue
</code></pre></div><p>Some questions will be asked. Fill with your correct app identifier. Prefer the history mode -- it is nicer the user and you can use the HTML5 history API:</p> <div class="language- extra-class"><pre class="language-text"><code>? Enter a unique application identifier: org.yourcompany.yourapplication
? Use HTML5 history mode? (Default: hash mode) Yes
? Is this a brand new project? (Default: Yes) Yes
? Dual Native AND Web development experience or a Native only? (Default: Dual) Dual Native AND Web
? What type of template do you want to start with? (Default: Simple) Simple
</code></pre></div><p>At this point you should have the basic stuff to get started. Get a coffee while things are downloaded and compiled. Then you can run this:</p> <div class="language- extra-class"><pre class="language-text"><code># now you can serve the web application
$ yarn run serve:web

# now you can serve the mobile application
$ yarn run preview:android
# or
$ yarn run preview:ios
</code></pre></div><h2 id="how-to-build"><a href="#how-to-build" class="header-anchor">#</a> How to build</h2> <p>We have several build targets, and our package.json shows this.</p> <dl><dt>yarn build:[platform]</dt> <dd>Builds production version for the target platform.</dd> <dt>yarn clean:[platform]</dt> <dd>Cleans build.</dd> <dt>yarn debug:[platform]</dt> <dd>Only iOS and Android. This runs a hot reloading version with full debug on your actual device.</dd> <dt>yarn serve:[platform]</dt> <dd>Runs the software on the actual device. For web this provides a webserver with hot reloading.</dd></dl> <p>Our build uses Webpack, and comes already configured from the project template. We'll have more to talk about this <a href="/frontend/deployment.html">on the deployment chapter</a>. If you are in a rush to see something in your web browser, <code>yarn serve:web</code> is what you want.</p> <h2 id="code-structure"><a href="#code-structure" class="header-anchor">#</a> Code structure</h2> <p>We'll end up with a directory structure like this:</p> <dl><dt>dist/</dt> <dd>Directory for production build of the Web version</dd> <dt>hooks/</dt> <dd>Hook scripts for build</dd> <dt>platforms/</dt> <dd>Build directory for native app</dd> <dt>public/</dt> <dd>Directory for public files. Things here will be copied as they are to the deployment package</dd> <dt>src/</dt> <dd>The actual code</dd> <dt>src/assets</dt> <dd>Images and other assets loaded by the code go here.</dd> <dt>src/components</dt> <dd>Components that you can reuse.</dd> <dt>src/shared</dt> <dd>JS code that you can reuse.</dd> <dt>src/views</dt> <dd>Routeable pages.</dd></dl> <h2 id="configuring-our-environment-variables"><a href="#configuring-our-environment-variables" class="header-anchor">#</a> Configuring our environment variables</h2> <p>There are a number of <code>.env</code> files in our main directory to set variables:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>.env.local
.env.development.android
.env.development.ios
.env.development.web
.env.production.android
.env.production.ios
.env.production.web
</code></pre></div><p>We also have <code>.env.local</code> to provide variables shared for all build types. This allows you to easily set data that depends on where it's running, adapting it for development or production environments.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token constant">VUE_APP_BASE_URL</span><span class="token operator">=</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">8080</span>
<span class="token constant">VUE_APP_API_URL</span><span class="token operator">=</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>
<span class="token constant">VUE_APP_OAUTH_CLIENT_ID</span><span class="token operator">=</span><span class="token number">2</span>
<span class="token constant">VUE_APP_OAUTH_CLIENT_SECRET</span><span class="token operator">=</span>xxxxxxxxxxxxxxxxxxx
<span class="token constant">VUE_APP_GOOGLE_TOKEN</span><span class="token operator">=</span>AIzxxxxxxxxxxxxxxxxx<span class="token operator">-</span>xxxxxxxxxx
</code></pre></div><h2 id="sharing-native-and-web-code"><a href="#sharing-native-and-web-code" class="header-anchor">#</a> Sharing Native and Web code</h2> <p>It's possible to use a Single File Component mixing both web and native code, something like this:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">web</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>myclass<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    Something
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">native</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Something<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>myclass<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">native</span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">web</span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">native</span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">web</span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Not all tags need a web/native version: the idea is to share the same code as much as possible. You can have the same <code>&lt;script&gt;</code> for both. If you need to have completely different versions of the files for template, script and style it's easier to create separate files, which will be loaded automatically according to the build. This is valid for vue or js files:</p> <dl><dt>file.android.vue</dt> <dd>Loaded by the Android build, if this file exists</dd> <dt>file.ios.vue</dt> <dd>Loaded by the iOS build, if this file exists</dd> <dt>file.native.vue</dt> <dd>Loaded by the native build, if this file exists and the specific (Android/iOS) file does not exist</dd> <dt>file.vue</dt> <dd>The web/native version, replaced by the above files if they exist</dd></dl> <p>We organize the code for this book to use a single <code>file.js</code> with separate <code>&lt;template&gt;</code> in most cases, and when the <code>&lt;script&gt;</code> part also differs we use separate files.</p> <p>Sometimes you need to run only a few extra lines in one of the builds. It's easy to do it with an if. The only drawback is that you can't <code>import</code> external code that only works natively or on web inside the if.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_MODE</span> <span class="token operator">===</span> <span class="token string">&quot;native&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// do something here</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Of course it's easier to add a few helper methods:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">isNative</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_MODE</span> <span class="token operator">==</span> <span class="token string">'native'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token function">isWeb</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_MODE</span> <span class="token operator">==</span> <span class="token string">'web'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>You'll end up with several minor functions like this which are useful all through your project. It's easier to add them to a mixin:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> pagemixinsub <span class="token keyword">from</span> <span class="token string">&quot;./pagemixinsub&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>pagemixinsub<span class="token punctuation">.</span>methods<span class="token punctuation">,</span>

    <span class="token comment">// shared code goes here</span>

    <span class="token function">isNative</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_MODE</span> <span class="token operator">==</span> <span class="token string">&quot;native&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">isWeb</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_MODE</span> <span class="token operator">==</span> <span class="token string">&quot;web&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>which you can load on <code>main.js</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> PageMixin <span class="token keyword">from</span> <span class="token string">&quot;~/modules/pagemixin&quot;</span><span class="token punctuation">;</span>
Vue<span class="token punctuation">.</span><span class="token function">mixin</span><span class="token punctuation">(</span>PageMixin<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>One helpful way to setup this utility mixin is to write shared code directly on <code>pagemixin.js</code>, but separate platform specific in <code>pagemixinsub.js</code> and <code>pagemixinsub.native.js</code> files, which are included like in the example above. This pattern works whenever you want a base code that is shared between all architectures but with specific functions overriden.</p></div> <p>For example, you can have a single <code>this.confirm()</code> method available on all Vue components that returns a promise and works for web and native:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// web version</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">confirm</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> title <span class="token operator">=</span> <span class="token string">&quot;My app&quot;</span><span class="token punctuation">,</span> okButtonText <span class="token operator">=</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">confirm</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Nativescript version:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// nativescript version</span>
<span class="token keyword">const</span> dialogs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;tns-core-modules/ui/dialogs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">confirm</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> title <span class="token operator">=</span> <span class="token string">&quot;My app&quot;</span><span class="token punctuation">,</span> okButtonText <span class="token operator">=</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> dialogs<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        title<span class="token punctuation">,</span>
        okButtonText<span class="token punctuation">,</span>
        message<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>There are two different entry points for this project, <code>src/main.js</code> and <code>src/main.native.js</code>. This makes it easy to setup basic code that differs for native and web.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/" class="prev router-link-active">
        Home
      </a></span> <span class="next"><a href="/frontend/interface.html">
        Building the interface
      </a>
      →
    </span></p></div> </main> <footer data-v-136409f7><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" data-v-136409f7><img alt="Creative Commons License" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" style="border-width: 0;" data-v-136409f7></a> <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type" data-v-136409f7>A full stack approach to integrated web and native app development</span>
  by
  <span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName" data-v-136409f7>Bruno Barberi Gnecco</span>
  is licensed under a
  <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" data-v-136409f7>Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International
    License</a>.
</footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.820aeba6.js" defer></script><script src="/assets/js/2.7bd00ffb.js" defer></script><script src="/assets/js/26.6913f4ea.js" defer></script>
  </body>
</html>
