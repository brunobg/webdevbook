<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Testing and Deployment | Full stack Web and Native Development</title>
    <meta name="generator" content="VuePress 1.5.1">
    
    <meta name="description" content="Creating native and web apps using Vue, NativeScript and Laravel">
    <link rel="preload" href="/assets/css/0.styles.7e4b3e23.css" as="style"><link rel="preload" href="/assets/js/app.8aacc315.js" as="script"><link rel="preload" href="/assets/js/2.7bd00ffb.js" as="script"><link rel="preload" href="/assets/js/32.9318217e.js" as="script"><link rel="prefetch" href="/assets/js/10.ecb2b35d.js"><link rel="prefetch" href="/assets/js/11.668c04e1.js"><link rel="prefetch" href="/assets/js/12.7bd3ab23.js"><link rel="prefetch" href="/assets/js/13.9373112b.js"><link rel="prefetch" href="/assets/js/14.a44daf49.js"><link rel="prefetch" href="/assets/js/15.acfcc4da.js"><link rel="prefetch" href="/assets/js/16.304bd6ae.js"><link rel="prefetch" href="/assets/js/17.dc02afff.js"><link rel="prefetch" href="/assets/js/18.f0d3271f.js"><link rel="prefetch" href="/assets/js/19.d06c9906.js"><link rel="prefetch" href="/assets/js/20.dd6b07b3.js"><link rel="prefetch" href="/assets/js/21.7edad848.js"><link rel="prefetch" href="/assets/js/22.901473fe.js"><link rel="prefetch" href="/assets/js/23.f9d1d186.js"><link rel="prefetch" href="/assets/js/24.283da734.js"><link rel="prefetch" href="/assets/js/25.a41070f5.js"><link rel="prefetch" href="/assets/js/26.6913f4ea.js"><link rel="prefetch" href="/assets/js/27.bfdbc3cb.js"><link rel="prefetch" href="/assets/js/28.d9525154.js"><link rel="prefetch" href="/assets/js/29.40bf433c.js"><link rel="prefetch" href="/assets/js/3.70b562fb.js"><link rel="prefetch" href="/assets/js/30.fb8065ff.js"><link rel="prefetch" href="/assets/js/31.f8831942.js"><link rel="prefetch" href="/assets/js/4.99e7b2a0.js"><link rel="prefetch" href="/assets/js/5.f0c0dcb8.js"><link rel="prefetch" href="/assets/js/6.512d59c2.js"><link rel="prefetch" href="/assets/js/7.2dbe39f9.js"><link rel="prefetch" href="/assets/js/8.74aba7b0.js"><link rel="prefetch" href="/assets/js/9.0666d488.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7e4b3e23.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Full stack Web and Native Development</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">Home</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Frontend</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/frontend/interface.html" class="sidebar-link">Building the interface</a></li><li><a href="/frontend/debug.html" class="sidebar-link">Code and debugging tips</a></li><li><a href="/frontend/deployment.html" class="sidebar-link">Deployment</a></li><li><a href="/frontend/routing.html" class="sidebar-link">Routing</a></li><li><a href="/frontend/stateandstorage.html" class="sidebar-link">State and storage</a></li><li><a href="/frontend/authentication.html" class="sidebar-link">Authentication</a></li><li><a href="/frontend/communication.html" class="sidebar-link">Communication with the backend</a></li><li><a href="/frontend/models.html" class="sidebar-link">Models and collections</a></li><li><a href="/frontend/testing.html" aria-current="page" class="active sidebar-link">Testing and Deployment</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend/testing.html#unit-tests-with-mocha" class="sidebar-link">Unit tests with Mocha</a></li><li class="sidebar-sub-header"><a href="/frontend/testing.html#end-to-end-web-tests-with-cypress" class="sidebar-link">End-to-end web tests with Cypress</a></li><li class="sidebar-sub-header"><a href="/frontend/testing.html#end-to-end-native-tests-with-appium" class="sidebar-link">End-to-end native tests with Appium</a></li><li class="sidebar-sub-header"><a href="/frontend/testing.html#mocking" class="sidebar-link">Mocking</a></li></ul></li><li><a href="/frontend/i18n.html" class="sidebar-link">Internationalization (i18n)</a></li><li><a href="/frontend/pushcommunication.html" class="sidebar-link">Push communication</a></li><li><a href="/frontend/camera.html" class="sidebar-link">Camera</a></li><li><a href="/frontend/sharing.html" class="sidebar-link">Sharing</a></li><li><a href="/frontend/caching.html" class="sidebar-link">/frontend/caching.html</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Backend</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="testing-and-deployment"><a href="#testing-and-deployment" class="header-anchor">#</a> Testing and Deployment</h1> <p>Any project without automatic tests is bound to break and go to production broken. Tests avoid regression. Tests are also the last thing many people implement, if ever. We'll see how easy it is to add a few automatic tests</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>There are many tools for Continuous Integration and Continuous Delivery these days. They automate your tests and run then on every commit. Take a look at <a href="https://www.jenkins.io/" target="_blank" rel="noopener noreferrer">Jenkins<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for example.</p></div> <h2 id="unit-tests-with-mocha"><a href="#unit-tests-with-mocha" class="header-anchor">#</a> Unit tests with Mocha</h2> <p>Unit tests of the frontend can check that the implementation is doing what is expected and is a good way to test complex functions in Vue files or in independent JS files.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>A unit test can quickly become a feature test -- and whether that is right or wrong depends on who you're talking to. Unit tests should be about single units of code, ensuring they are working as expected. Often bugs happen when you integrate code; two pieces of code which are correctly working in separate have a bug when called together. Feature tests catch those bugs. On the frontend simulating a browser for feature tests can quickly become hard to manage, so perhaps an E2E test might be more appropriate.</p></div> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> test:mocha
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Using VSCode? Check <a href="https://marketplace.visualstudio.com/items?itemName=maty.vscode-mocha-sidebar" target="_blank" rel="noopener noreferrer">the mocha sidebar<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <h2 id="end-to-end-web-tests-with-cypress"><a href="#end-to-end-web-tests-with-cypress" class="header-anchor">#</a> End-to-end web tests with Cypress</h2> <p>End-to-end (E2E) tests have the nice quality of running the exact same operations and on the exact interface your users will run. This is as close as possible to someone actually using the system. On the other hand they are more prone to break -- if you change the interface too much, the tests break. It's also hard to write E2E tests as part of TDD: you need to know what the interface is like before you can implement them.</p> <p>The tools for E2E tests have evolved very much over the last few years and is much more stable.</p> <ol><li>Plan your test. Describe what it needs to do. Even though you are doing E2E, avoid very long tests.</li> <li>Design your interface before your test. It's time consuming to update your tests several times because the HTML keeps changing.</li> <li>Implement ids in your HTML to have robust selectors. It's easier to target a <code>#element</code> than a <code>div.class &gt; div &gt; div &gt; button</code>. It will change way less with time: the id will always be attached to that element, while the HTML structure might change completely for purely visual reasons. If you are using classes as selectors, prefer to use classes that are only for selecting, instead of using visual CSS classes which might change any time.</li></ol> <p>We'll use <a href="https://www.cypress.io/" target="_blank" rel="noopener noreferrer">Cypress<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to implement E2E here, but the idea of E2E tests is the same with any tool you use. Cypress has the advantage of running in an integrated Chromium browser, which makes watching what goes wrong and debugging both the app and the tests themselves easy, and runs standalone without the need of spawning a test server instance.</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> cypress faker --dev
./node_modules/.bin/cypress <span class="token function">open</span>

</code></pre></div><p>This will create a <code>cypress/</code> directory.</p> <p>Let's test our registration system as an example of E2E. This is a complex operation that performs a lot of tasks internally, including on our backend. But it's a very important feature that you are probably not going to use often, as you'll hardly ever create new users during your development. What we want:</p> <ol><li>Open the login page.</li> <li>Select new user registration</li> <li>Fill data
<ol><li>Try to submit it with empty data.</li> <li>Fill with invalid values</li> <li>Fill with correct values</li></ol></li> <li>Submit</li> <li>Check we were registrated correctly.</li></ol> <p>&lt;x&lt;x&lt; @/../client/cypress/integration/register_test.js</p> <p>https://www.cypress.io/blog/2017/11/28/testing-vue-web-application-with-vuex-data-store-and-rest-backend/</p> <h2 id="end-to-end-native-tests-with-appium"><a href="#end-to-end-native-tests-with-appium" class="header-anchor">#</a> End-to-end native tests with Appium</h2> <h2 id="mocking"><a href="#mocking" class="header-anchor">#</a> Mocking</h2> <p><a href="https://miragejs.com/" target="_blank" rel="noopener noreferrer">Mirage<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="https://github.com/nock/nock" target="_blank" rel="noopener noreferrer">Nock<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> are packages that allow you to easily mock calls</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/frontend/models.html" class="prev">
        Models and collections
      </a></span> <span class="next"><a href="/frontend/i18n.html">
        Internationalization (i18n)
      </a>
      →
    </span></p></div> </main> <footer data-v-136409f7><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" data-v-136409f7><img alt="Creative Commons License" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" style="border-width: 0;" data-v-136409f7></a> <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type" data-v-136409f7>A full stack approach to integrated web and native app development</span>
  by
  <span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName" data-v-136409f7>Bruno Barberi Gnecco</span>
  is licensed under a
  <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" data-v-136409f7>Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International
    License</a>.
</footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8aacc315.js" defer></script><script src="/assets/js/2.7bd00ffb.js" defer></script><script src="/assets/js/32.9318217e.js" defer></script>
  </body>
</html>
