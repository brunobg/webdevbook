<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Testing and Deployment | Web development: management, frontend and backend</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="Creating native and web apps using Vue, NativeScript and Laravel">
    <link rel="preload" href="/webdevbook/assets/css/0.styles.6f5b36b1.css" as="style"><link rel="preload" href="/webdevbook/assets/js/app.d6ddc01a.js" as="script"><link rel="preload" href="/webdevbook/assets/js/2.d065ae5f.js" as="script"><link rel="preload" href="/webdevbook/assets/js/42.ec88c83c.js" as="script"><link rel="prefetch" href="/webdevbook/assets/js/10.c87da69f.js"><link rel="prefetch" href="/webdevbook/assets/js/11.ca758054.js"><link rel="prefetch" href="/webdevbook/assets/js/12.a93f3d54.js"><link rel="prefetch" href="/webdevbook/assets/js/13.1aeeb621.js"><link rel="prefetch" href="/webdevbook/assets/js/14.95d7855b.js"><link rel="prefetch" href="/webdevbook/assets/js/15.bfac4853.js"><link rel="prefetch" href="/webdevbook/assets/js/16.f3301507.js"><link rel="prefetch" href="/webdevbook/assets/js/17.0c0c23e5.js"><link rel="prefetch" href="/webdevbook/assets/js/18.4d6af17a.js"><link rel="prefetch" href="/webdevbook/assets/js/19.be8c9587.js"><link rel="prefetch" href="/webdevbook/assets/js/20.8f6dd8bd.js"><link rel="prefetch" href="/webdevbook/assets/js/21.9a0bdbdc.js"><link rel="prefetch" href="/webdevbook/assets/js/22.81b13454.js"><link rel="prefetch" href="/webdevbook/assets/js/23.a40c4fbc.js"><link rel="prefetch" href="/webdevbook/assets/js/24.851b54e9.js"><link rel="prefetch" href="/webdevbook/assets/js/25.67c32603.js"><link rel="prefetch" href="/webdevbook/assets/js/26.66229317.js"><link rel="prefetch" href="/webdevbook/assets/js/27.b0467bfe.js"><link rel="prefetch" href="/webdevbook/assets/js/28.2575ae0a.js"><link rel="prefetch" href="/webdevbook/assets/js/29.95a6bd47.js"><link rel="prefetch" href="/webdevbook/assets/js/3.d727a3b8.js"><link rel="prefetch" href="/webdevbook/assets/js/30.3608412d.js"><link rel="prefetch" href="/webdevbook/assets/js/31.e2ced364.js"><link rel="prefetch" href="/webdevbook/assets/js/32.1437a2da.js"><link rel="prefetch" href="/webdevbook/assets/js/33.b94cbcaa.js"><link rel="prefetch" href="/webdevbook/assets/js/34.4bf33957.js"><link rel="prefetch" href="/webdevbook/assets/js/35.e4fcb519.js"><link rel="prefetch" href="/webdevbook/assets/js/36.26ab1602.js"><link rel="prefetch" href="/webdevbook/assets/js/37.3d237bbe.js"><link rel="prefetch" href="/webdevbook/assets/js/38.42a47cdc.js"><link rel="prefetch" href="/webdevbook/assets/js/39.60a8024c.js"><link rel="prefetch" href="/webdevbook/assets/js/4.c0e70bc7.js"><link rel="prefetch" href="/webdevbook/assets/js/40.2a034950.js"><link rel="prefetch" href="/webdevbook/assets/js/41.cfef1a3a.js"><link rel="prefetch" href="/webdevbook/assets/js/43.e985bb55.js"><link rel="prefetch" href="/webdevbook/assets/js/44.5e1bb59e.js"><link rel="prefetch" href="/webdevbook/assets/js/45.fafebbe9.js"><link rel="prefetch" href="/webdevbook/assets/js/46.51f02501.js"><link rel="prefetch" href="/webdevbook/assets/js/5.cda929b9.js"><link rel="prefetch" href="/webdevbook/assets/js/6.423fdf70.js"><link rel="prefetch" href="/webdevbook/assets/js/7.8ebb662b.js"><link rel="prefetch" href="/webdevbook/assets/js/8.1f0319bc.js"><link rel="prefetch" href="/webdevbook/assets/js/9.f8fb6885.js">
    <link rel="stylesheet" href="/webdevbook/assets/css/0.styles.6f5b36b1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/webdevbook/" class="home-link router-link-active"><!----> <span class="site-name">Web development: management, frontend and backend</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/webdevbook/" aria-current="page" class="sidebar-link">Home</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Software projects</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Frontend</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/webdevbook/frontend/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/webdevbook/frontend/reactive.html" class="sidebar-link">Reactive programming</a></li><li><a href="/webdevbook/frontend/interface.html" class="sidebar-link">Interface</a></li><li><a href="/webdevbook/frontend/setup.html" class="sidebar-link">Setup</a></li><li><a href="/webdevbook/frontend/debug.html" class="sidebar-link">Code and debugging tips</a></li><li><a href="/webdevbook/frontend/deployment.html" class="sidebar-link">Deployment</a></li><li><a href="/webdevbook/frontend/routing.html" class="sidebar-link">Routing</a></li><li><a href="/webdevbook/frontend/stateandstorage.html" class="sidebar-link">State and storage</a></li><li><a href="/webdevbook/frontend/authentication.html" class="sidebar-link">Authentication</a></li><li><a href="/webdevbook/frontend/communication.html" class="sidebar-link">Communication with the backend</a></li><li><a href="/webdevbook/frontend/models.html" class="sidebar-link">Models and collections</a></li><li><a href="/webdevbook/frontend/testing.html" aria-current="page" class="active sidebar-link">Testing and Deployment</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webdevbook/frontend/testing.html#planning-your-tests" class="sidebar-link">Planning your tests</a></li><li class="sidebar-sub-header"><a href="/webdevbook/frontend/testing.html#unit-tests-with-mocha" class="sidebar-link">Unit tests with Mocha</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webdevbook/frontend/testing.html#code-coverage" class="sidebar-link">Code Coverage</a></li><li class="sidebar-sub-header"><a href="/webdevbook/frontend/testing.html#vue-with-unit-tests" class="sidebar-link">Vue with unit tests</a></li></ul></li><li class="sidebar-sub-header"><a href="/webdevbook/frontend/testing.html#end-to-end-tests" class="sidebar-link">End-to-end tests</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webdevbook/frontend/testing.html#cypress" class="sidebar-link">Cypress</a></li><li class="sidebar-sub-header"><a href="/webdevbook/frontend/testing.html#appium" class="sidebar-link">Appium</a></li></ul></li><li class="sidebar-sub-header"><a href="/webdevbook/frontend/testing.html#mocking" class="sidebar-link">Mocking</a></li></ul></li><li><a href="/webdevbook/frontend/i18n.html" class="sidebar-link">Internationalization (i18n)</a></li><li><a href="/webdevbook/frontend/pushcommunication.html" class="sidebar-link">Push communication</a></li><li><a href="/webdevbook/frontend/camera.html" class="sidebar-link">File upload and camera</a></li><li><a href="/webdevbook/frontend/sharing.html" class="sidebar-link">Sharing</a></li><li><a href="/webdevbook/frontend/caching.html" class="sidebar-link">Caching</a></li><li><a href="/webdevbook/frontend/last.html" class="sidebar-link">Where to go from here</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Backend</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="testing-and-deployment"><a href="#testing-and-deployment" class="header-anchor">#</a> Testing and Deployment</h1> <p>Any project without automatic tests is bound to break and go to production broken. Tests avoid regression. Tests are also the last thing many people implement, if ever. We'll see how easy it is to add a few automatic tests</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>There are many tools for Continuous Integration (CI) and Continuous Delivery (CD) these days. They automate your tests and run then on every commit. Take a look at <a href="https://www.jenkins.io/" target="_blank" rel="noopener noreferrer">Jenkins<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for example.</p></div> <h2 id="planning-your-tests"><a href="#planning-your-tests" class="header-anchor">#</a> Planning your tests</h2> <p>Don't avoid tests. Don't leave them for later.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>TDD, or <a href="https://en.wikipedia.org/wiki/Test-driven_development" target="_blank" rel="noopener noreferrer">Test-Driven Development<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, is a software development process that relies on the repetition of a very short development cycle: requirements are turned into very specific test cases, then the code is improved so that the tests pass.</p></div> <p>Writing your tests as you write your code is invaluable. It makes you think about what you are writing, it makes you use your code external API and see if it makes sense in practice, it makes you structure your code with functions are independent and easily testable, and, of course, it makes sure your code actually works.</p> <p>When using interpreted languages such as JS and PHP, <a href="/webdevbook/frontend/debug.html">linting</a> is even more important. It catches many problems such as typos, and you should run that in your CI even before (or in parallel) with unit tests.</p> <p>Testing the frontend provides a few extra challenges compared to the backend. Frontend is meant to run in a browser and have graphic output. This means we need a few extra strategies. Writing traditional unit tests will work for the majority of JS. You can <a href="#mocking">mock the AJAX calls</a> to avoid needing a server available and with correct data.</p> <p>There are several tools these days to test code that needs a browser. <a href="https://github.com/jsdom/jsdom" target="_blank" rel="noopener noreferrer">JSDOM<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> implements web standards in JS, allowing you to emulate a wide subset of DOM and HTML standards. This means you can run JS that needs DOM, including Vue or React, and get unit and integration tests without opening a browser. There are plugins to integrate these frameworks with JSDOM, making them a breeze to use.</p> <p>Testing the actual final code, however, is important for more complex tests. Longer processes such as sign ups, filling forms that use third-party services or things that require graphical interaction need to be tested with the actual code -- that's end-to-end testing (E2E). Tools have come a long, long way in recent years, and there are cloud services that can test your code in dozens of different devices. Is your code working in Safari iOS? What about Edge in Windows? Did you check Firefox Linux? Not only you can check the code works, but you can see the screenshots when it fails, which can pinpoint visual bugs, as well -- such as that button being hidden.</p> <h2 id="unit-tests-with-mocha"><a href="#unit-tests-with-mocha" class="header-anchor">#</a> Unit tests with Mocha</h2> <p>Unit tests of the frontend can check that the implementation is doing what is expected and is a good way to test complex functions in Vue files or in independent JS files.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>A unit test can quickly become a feature test -- and whether that is right or wrong depends on who you're talking to. Unit tests should be about single units of code, ensuring they are working as expected. Often bugs happen when you integrate code; two pieces of code which are correctly working in separate have a bug when called together. Feature tests catch those bugs. On the frontend simulating a browser for feature tests can quickly become hard to manage, so perhaps an E2E test might be more appropriate.</p></div> <p>Let's add our deps.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>vue <span class="token function">add</span> unit-mocha
<span class="token function">yarn</span> <span class="token function">add</span> faker
</code></pre></div><p>Add some nice script runners on <code>package.json</code>:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;test:mocha&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.......&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Now you can run tests with:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> test:mocha
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Using VSCode? Check <a href="https://marketplace.visualstudio.com/items?itemName=maty.vscode-mocha-sidebar" target="_blank" rel="noopener noreferrer">the mocha sidebar<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and run tests directly in your IDE.</p></div> <h3 id="code-coverage"><a href="#code-coverage" class="header-anchor">#</a> Code Coverage</h3> <p>TODO</p> <h3 id="vue-with-unit-tests"><a href="#vue-with-unit-tests" class="header-anchor">#</a> Vue with unit tests</h3> <p>TODO</p> <h2 id="end-to-end-tests"><a href="#end-to-end-tests" class="header-anchor">#</a> End-to-end tests</h2> <h3 id="cypress"><a href="#cypress" class="header-anchor">#</a> Cypress</h3> <p>End-to-end (E2E) tests have the nice quality of running the exact same operations and on the exact interface your users will run. This is as close as possible to someone actually using the system. On the other hand they are more prone to break -- if you change the interface too much, the tests break. It's also hard to write E2E tests as part of TDD: you need to know what the interface is like before you can implement them.</p> <p>The tools for E2E tests have evolved very much over the last few years and is much more stable.</p> <ol><li>Plan your test. Describe what it needs to do. Even though you are doing E2E, avoid very long tests.</li> <li>Design your interface before your test. It's time consuming to update your tests several times because the HTML keeps changing.</li> <li>Implement ids in your HTML to have robust selectors. It's easier to target a <code>#element</code> than a <code>div.class &gt; div &gt; div &gt; button</code>. It will change way less with time: the id will always be attached to that element, while the HTML structure might change completely for purely visual reasons. If you are using classes as selectors, prefer to use classes that are only for selecting, instead of using visual CSS classes which might change any time.</li></ol> <p>We'll use <a href="https://www.cypress.io/" target="_blank" rel="noopener noreferrer">Cypress<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to implement E2E here, but the idea of E2E tests is the same with any tool you use. Cypress has the advantage of running in an integrated Chromium browser, which makes watching what goes wrong and debugging both the app and the tests themselves easy, and runs standalone without the need of spawning a test server instance.</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> cypress faker --dev
./node_modules/.bin/cypress <span class="token function">open</span>

</code></pre></div><p>This will create a <code>cypress/</code> directory.</p> <p>Let's test our registration system as an example of E2E. This is a complex operation that performs a lot of tasks internally, including on our backend. But it's a very important feature that you are probably not going to use often, as you'll hardly ever create new users during your development. What we want:</p> <ol><li>Open the login page.</li> <li>Select new user registration</li> <li>Fill data
<ol><li>Try to submit it with empty data.</li> <li>Fill with invalid values</li> <li>Fill with correct values</li></ol></li> <li>Submit</li> <li>Check we were registrated correctly.</li></ol> <p>&lt;x&lt;x&lt; @/../client/cypress/integration/register_test.js</p> <p>https://www.cypress.io/blog/2017/11/28/testing-vue-web-application-with-vuex-data-store-and-rest-backend/</p> <h3 id="appium"><a href="#appium" class="header-anchor">#</a> Appium</h3> <p>TODO</p> <h2 id="mocking"><a href="#mocking" class="header-anchor">#</a> Mocking</h2> <p><a href="https://miragejs.com/" target="_blank" rel="noopener noreferrer">Mirage<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="https://github.com/nock/nock" target="_blank" rel="noopener noreferrer">Nock<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> are packages that allow you to easily mock calls</p> <p>TODO</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/webdevbook/frontend/models.html" class="prev">
        Models and collections
      </a></span> <span class="next"><a href="/webdevbook/frontend/i18n.html">
        Internationalization (i18n)
      </a>
      →
    </span></p></div> </main> <footer data-v-136409f7><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" data-v-136409f7><img alt="Creative Commons License" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" style="border-width: 0;" data-v-136409f7></a> <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type" data-v-136409f7>A full stack approach to integrated web and native app development</span>
  by
  <span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName" data-v-136409f7>Bruno Barberi Gnecco</span>
  is licensed under a
  <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" data-v-136409f7>Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International
    License</a>.
</footer></div><div class="global-ui"></div></div>
    <script src="/webdevbook/assets/js/app.d6ddc01a.js" defer></script><script src="/webdevbook/assets/js/2.d065ae5f.js" defer></script><script src="/webdevbook/assets/js/42.ec88c83c.js" defer></script>
  </body>
</html>
